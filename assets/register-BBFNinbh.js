import{c as g,d as y}from"./app-YCXN7p87.js";let u,m,c;function h(){u=document.querySelector(".register__file-input"),m=document.querySelector(".register__item-documemt-placeholder"),c=document.querySelector(".register__item-document-filename"),u&&u.addEventListener("change",function(s){const r=this.files[0];if(r){if(!["image/jpeg","image/jpg","image/png","application/pdf"].includes(r.type)){alert("Please select a PDF, JPG or PNG file"),this.value="";return}_(r)}})}function _(s){m&&(m.style.display="none"),c&&(c.textContent=`${s.name}`,c.classList.add("show"))}async function L(){h();const s=document.getElementById("register-form"),r=document.querySelectorAll(".register__btn"),o=document.querySelector(".register__item.permission"),a=document.querySelector(".register__submit");a&&(a.disabled=!0,a.classList.add("disabled")),r.forEach(e=>{e.addEventListener("click",()=>{r.forEach(t=>t.classList.remove("active")),e.classList.add("active"),o&&(o.style.display=e.classList.contains("btn-wholesale")?"block":"none")})});function f(e){const t=e.closest(".register__item");t&&(t.classList.remove("input-error"),e.dataset.touched&&!e.checkValidity()&&t.classList.add("input-error"))}function d(){if(!a)return;const e=s.querySelectorAll("input[required]"),t=document.querySelector(".btn-wholesale.active"),l=s.querySelector(".register__file-input");let i=!0;e.forEach(n=>{(!n.value.trim()||!n.checkValidity())&&(i=!1)}),t&&(!l.files||l.files.length===0)&&(i=!1,l.dataset.touched&&l.closest(".register__item")?.classList.add("input-error")),a.disabled=!i,a.classList.toggle("disabled",!i)}s.querySelectorAll("input").forEach(e=>{e.addEventListener("blur",()=>{e.dataset.touched="true",f(e),d()}),e.addEventListener("input",()=>{f(e),d()})}),o&&(o.style.display="none"),d(),s.addEventListener("submit",async e=>{e.preventDefault();const t=document.querySelector(".btn-wholesale.active"),l=s.querySelector(".register__file-input"),i=new FormData(s);let n=null;if(t){if(!l.files||l.files.length===0){alert("Please upload wholesale purchase permission document");return}n=await g(l.files[0])}const p=await y({email:i.get("email"),password:i.get("password"),first_name:i.get("first_name"),last_name:i.get("last_name"),role:t?"wholesale":"regular",temp_document_path:n});console.log(p),alert("Check your email to confirm registration")})}export{L as initRegisterPage};
